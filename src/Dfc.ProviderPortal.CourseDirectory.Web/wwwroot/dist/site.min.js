"use strict";function ajax_get(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){console.log("responseText:"+n.responseText);try{var e=JSON.parse(n.responseText)}catch(e){return}t(e)}},n.open("GET",e,!0),n.send()}function ajax_get(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){try{var e=JSON.parse(n.responseText)}catch(e){return}t(e)}},n.open("GET",e,!0),n.send()}!function(i){i.fn.addTriggersToJqueryValidate=function(){return this.each(function(){var e=i(this),t=e.data("validator");if(t&&!e.data("jQueryValidateTriggersAdded")){e.data("jQueryValidateTriggersAdded",!0);var n=t.form;t.form=function(){var e=n.apply(this,arguments),t=this.currentForm;return i(t).trigger(1==e?"formValidationSuccess":"formValidationError",t),i(t).trigger("formValidation",[t,e]),e};var r=t.element;t.element=function(e){var t=r.apply(this,arguments);return i(e).trigger(1==t?"elementValidationSuccess":"elementValidationError",e),i(e).trigger("elementValidation",[e,t]),t}}})},i.fn.extend({triggerElementValidationsOnFormValidation:function(){return this.each(function(){i(this).bind("formValidation",function(e,t){i(t).find("*[data-val=true]").each(function(e,t){i(t).hasClass("input-validation-error")?(i(t).trigger("elementValidationError",t),i(t).trigger("elementValidation",[t,!1])):(i(t).trigger("elementValidationSuccess",t),i(t).trigger("elementValidation",[t,!0]))})})})},formValidation:function(r){return this.each(function(){i(this).bind("formValidation",function(e,t,n){r(t,n)})})},formValidationSuccess:function(n){return this.each(function(){i(this).bind("formValidationSuccess",function(e,t){n(t)})})},formValidationError:function(n){return this.each(function(){i(this).bind("formValidationError",function(e,t){n(t)})})},formValidAndInvalid:function(n,r){return this.each(function(){i(this).bind("formValidationSuccess",function(e,t){n(t)}),i(this).bind("formValidationError",function(e,t){r(t)})})},elementValidation:function(r){return this.each(function(){i(this).bind("elementValidation",function(e,t,n){r(t,n)})})},elementValidationSuccess:function(n){return this.each(function(){i(this).bind("elementValidationSuccess",function(e,t){n(t)})})},elementValidationError:function(n){return this.each(function(){i(this).bind("elementValidationError",function(e,t){n(t)})})},elementValidAndInvalid:function(n,r){return this.each(function(){i(this).bind("elementValidationSuccess",function(e,t){n(t)}),i(this).bind("elementValidationError",function(e,t){r(t)})})}})}(jQuery),ajax_get("/js/lars.json",function(e){var t=document.getElementsByClassName("cd-lars-results")[0],n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var l=o.value,u="<div>\n        <p>".concat(l.LearnAimRefTitle,"</p>\n<p>").concat(l.LearnAimRef,"</p>\n<p>").concat(l.NotionalNVQLevelv2,"</p>\n<p>").concat(l.LearnAimRefTitle,'</p>\n<p><a href="#">add course</a></p>\n       </div>');console.log(l,u),n.push(u)}}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}t.append(n)}),ajax_get("/js/providers.json",function(e){var n=document.getElementsByClassName("cd-provider-results")[0],r=[],t=!0,i=!1,a=void 0;try{for(var o,c=function(){var n=o.value;n.ProviderContact.map(function(e){if("L"===e.ContactType){var t='\n                        <td class="govuk-table__cell">'.concat(n.UnitedKingdomProviderReferenceNumber,'</td>\n                        <td class="govuk-table__cell">').concat(n.ProviderName,'</td>\n                        <td class="govuk-table__cell">').concat(e.ContactAddress.Items[0],", ").concat(e.ContactAddress.StreetDescription,'</td>\n                        <td class="govuk-table__cell">').concat(e.ContactAddress.PostCode,'</td>\n                        <td class="govuk-table__cell"><a href="../../providers/details">view</a></td>\n                        ');r.push(t)}})},l=e[Symbol.iterator]();!(t=(o=l.next()).done);t=!0)c()}catch(e){i=!0,a=e}finally{try{t||null==l.return||l.return()}finally{if(i)throw a}}r.forEach(function(e){var t=document.createElement("tr");t.classList.add("govuk-table__row"),t.innerHTML=e,n.append(t)})}),function(c){var n,r,i,a=c("#LarsSearchTerm"),l=function(){if(void 0===(i=a.val())||null==i||i.replace(/\s/g,"").length<1)c("#LarsSearchResultContainer").html("");else{var e=c("input[name='NotionalNVQLevelv2Filter']:checkbox:checked"),t=c("input[name='AwardOrgCodeFilter']:checkbox:checked"),n=c("input[name='SectorSubjectAreaTier1Filter']:checkbox:checked"),r=c("input[name='SectorSubjectAreaTier2Filter']:checkbox:checked");!function(e,t){console.log(e);var n,r,i=c.param(e);n="%5B%5D",r="",i=i.split(n).join(r),c.get("/LarsSearch?"+i,t)}({SearchTerm:a.val(),NotionalNVQLevelv2Filter:e.map(function(){return c(this).val()}).get(),AwardOrgCodeFilter:t.map(function(){return c(this).val()}).get(),SectorSubjectAreaTier1Filter:n.map(function(){return c(this).val()}).get(),SectorSubjectAreaTier2Filter:r.map(function(){return c(this).val()}).get()},o)}var i},u=function(){c("#LarsSearchResultContainer .pagination .pagination__item").on("click",function(e){e.preventDefault();var t,n,r=c(e.target).attr("href");t=r,n=o,console.log(t),c.get(t,n)})},o=function(e){var t,n,r,i,a,o;t=e,(n=c("#LarsSearchResultContainer")).html(""),n.html(t),r=c("input[name='NotionalNVQLevelv2Filter']:checkbox"),i=c("input[name='AwardOrgCodeFilter']:checkbox"),a=c("input[name='SectorSubjectAreaTier1Filter']:checkbox"),o=c("input[name='SectorSubjectAreaTier2Filter']:checkbox"),r.on("click",l),i.on("click",l),a.on("click",l),o.on("click",l),c("#ClearAllFilters").on("click",function(e){e.preventDefault();for(var t=c("input[name='NotionalNVQLevelv2Filter']:checkbox:checked, input[name='AwardOrgCodeFilter']:checkbox:checked, input[name='SectorSubjectAreaTier1Filter']:checkbox, input[name='SectorSubjectAreaTier2Filter']:checkbox"),n=t.length,r=0;r<n;r++)r===n-1?c(t[r]).trigger("click"):c(t[r]).prop("checked",!1)}),u()};a.on("keyup",(n=l,r=400,function(){var e=this,t=arguments;clearTimeout(i),i=setTimeout(function(){n.apply(e,t)},r)}))}(jQuery);