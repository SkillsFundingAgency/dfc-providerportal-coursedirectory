"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function get_data(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){try{var e=JSON.parse(n.responseText)}catch(e){return}t(e)}},n.open("GET",e,!0),n.send()}function create_data(){get_data("/js/apprenticeships.json",function(e){if(document.getElementsByClassName("apprenticeship-search-page")[0]){var n=document.getElementsByClassName("cd-apprenticeships-results")[0];if(!document.getElementsByClassName("design2")[0]){var t=[],a=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value,l='\n    <div class="cd-apprenticeships-search-result__container">\n        <h2 class="govuk-heading-m cd-apprenticeships-search-result-heading" >'.concat(s.StandardName,'</h3>\n        <p class="govuk-body cd-apprenticeships-search-result-text "><span class="govuk-!-font-weight-bold">Level: </span><span>').concat(s.NotionalEndLevel,'</span></p>\n        <p class="cd-apprenticeships-search-result-text"><span class="govuk-!-font-weight-bold">unique id : </span><span>1234rftg</span></p>\n        <a class="govuk-link cd-apprenticeships-search-result-link" href="/apprenticeships/add">Choose this apprenticeship</a>\n\n    </div>');t.push(l)}}catch(e){r=!0,i=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}t.forEach(function(e){var t=document.createElement("div");t.innerHTML=e,n&&n.append(t)})}}})}function radioSwitcher(e){if(document.getElementsByClassName(e)[0]){var t=document.querySelectorAll(".govuk-button")[0];document.querySelectorAll("."+e+' input[type="radio"]').forEach(function(e){e.addEventListener("click",function(e){t.setAttribute("href",e.target.value)})})}}radioSwitcher("apprenticeship-type"),radioSwitcher("employerNationalQuestion"),radioSwitcher("employerNationalQuestion");var DualDeliveryPage=document.getElementsByClassName("dual-delivery")[0];if(DualDeliveryPage){var employerCheckbox=document.getElementById("employer"),selectOption=document.querySelectorAll(".select-list")[0];employerCheckbox.checked=!0,employerCheckbox.style.backgroundColor="red",employerCheckbox.addEventListener("click",function(){selectOption.classList.toggle("visible")})}var checkBoxes=document.querySelectorAll(".govuk-checkboxes__input"),options=[];function getOptions(){var a="";return checkBoxes.forEach(function(e){if(1==e.checked){options.push(e.value);var t=Array.from(new Set(options)),n=' <tr class="govuk-table__row">\n                    <th class="govuk-table__header" scope="row">venue<br /><span class="govuk-hint">postcode</span></th>\n                    <td class="govuk-table__cell govuk-table__cell--numeric">'.concat(t,'</td>\n                    <td class="govuk-table__cell govuk-table__cell--numeric"><a href="/apprenticeships/ConfirmDelete">Delete</a></td>\n                </tr>');a=n}}),a}var addAnother=document.getElementById("List");addAnother&&addAnother.addEventListener("click",function(){var e=getOptions();document.getElementById("Results").innerHTML+=e,document.getElementById("ResultsTable").classList.add("visible-table")});var searchpage=document.getElementsByClassName("apprenticeship-search-page")[0];if(searchpage){var pagination=document.getElementsByClassName("pagination")[0],searchButton=document.getElementsByClassName("submit")[0],resultsContainer=document.getElementsByClassName("cd-apprenticeships-results")[0],results2Container=document.getElementsByClassName("cd-apprenticeships2-results")[0];pagination.classList.add("hide"),searchButton.addEventListener("click",function(){create_data(),resultsContainer&&resultsContainer.classList.add("visible"),results2Container.classList.add("visible"),pagination.classList.add("visible")})}var item=document.getElementsByClassName("item"),items=_toConsumableArray(item),_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_loop2=function(){var e=_step2.value;items.forEach(function(e){console.log(e.classList)}),e.addEventListener("click",function(){e.classList.add("active"),items.forEach(function(e){e.classList.contains("active")&&console.log(e.classList)})})},_iterator2=items[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)_loop2()}catch(e){_didIteratorError2=!0,_iteratorError2=e}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}function ajax_get(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){try{var e=JSON.parse(n.responseText)}catch(e){return}t(e)}},n.open("GET",e,!0),n.send()}!function(r){r.fn.addTriggersToJqueryValidate=function(){return this.each(function(){var e=r(this),t=e.data("validator");if(t&&!e.data("jQueryValidateTriggersAdded")){e.data("jQueryValidateTriggersAdded",!0);var n=t.form;t.form=function(){var e=n.apply(this,arguments),t=this.currentForm;return r(t).trigger(1==e?"formValidationSuccess":"formValidationError",t),r(t).trigger("formValidation",[t,e]),e};var a=t.element;t.element=function(e){var t=a.apply(this,arguments);return r(e).trigger(1==t?"elementValidationSuccess":"elementValidationError",e),r(e).trigger("elementValidation",[e,t]),t}}})},r.fn.extend({triggerElementValidationsOnFormValidation:function(){return this.each(function(){r(this).bind("formValidation",function(e,t){r(t).find("*[data-val=true]").each(function(e,t){r(t).hasClass("input-validation-error")?(r(t).trigger("elementValidationError",t),r(t).trigger("elementValidation",[t,!1])):(r(t).trigger("elementValidationSuccess",t),r(t).trigger("elementValidation",[t,!0]))})})})},formValidation:function(a){return this.each(function(){r(this).bind("formValidation",function(e,t,n){a(t,n)})})},formValidationSuccess:function(n){return this.each(function(){r(this).bind("formValidationSuccess",function(e,t){n(t)})})},formValidationError:function(n){return this.each(function(){r(this).bind("formValidationError",function(e,t){n(t)})})},formValidAndInvalid:function(n,a){return this.each(function(){r(this).bind("formValidationSuccess",function(e,t){n(t)}),r(this).bind("formValidationError",function(e,t){a(t)})})},elementValidation:function(a){return this.each(function(){r(this).bind("elementValidation",function(e,t,n){a(t,n)})})},elementValidationSuccess:function(n){return this.each(function(){r(this).bind("elementValidationSuccess",function(e,t){n(t)})})},elementValidationError:function(n){return this.each(function(){r(this).bind("elementValidationError",function(e,t){n(t)})})},elementValidAndInvalid:function(n,a){return this.each(function(){r(this).bind("elementValidationSuccess",function(e,t){n(t)}),r(this).bind("elementValidationError",function(e,t){a(t)})})}})}(jQuery),ajax_get("/js/lars.json",function(e){var n=document.getElementsByClassName("cd-lars-results")[0],t=[],a=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value,l='\n    <div class="cd-lars-search-result__container">\n        <h3 class="govuk-heading-m" >'.concat(s.LearnAimRefTitle,'</h3>\n        <p class="govuk-body">LARS/QAN:<span class="govuk-!-font-weight-bold">').concat(s.LearnAimRef,'</span></p>\n        <p class="govuk-body">Level: <span class="govuk-!-font-weight-bold">').concat(s.NotionalNVQLevelv2,'</span></p>\n        <p class="govuk-body">Awarding body: <span class="govuk-!-font-weight-bold">').concat(s.AwardOrgCode,'</span></p>\n        <p class="govuk-body"><a class="govuk-link" href="/addCourse">Choose this qualification</a></p>\n     </div>');t.push(l)}}catch(e){r=!0,i=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}t.forEach(function(e){var t=document.createElement("div");t.innerHTML=e,n&&n.append(t)})});var provider=document.getElementsByClassName("provider")[0];function ajax_get1(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){try{var e=JSON.parse(n.responseText)}catch(e){return}t(e)}},n.open("GET",e,!0),n.send()}ajax_get1("/js/providers.json",function(e){var n=document.getElementsByClassName("cd-provider-results")[0],a=[],t=!0,r=!1,i=void 0;try{for(var o,c=function(){var n=o.value;n.ProviderContact.map(function(e){if("L"===e.ContactType){var t='\n                        <td class="govuk-table__cell">'.concat(n.UnitedKingdomProviderReferenceNumber,'</td>\n                        <td class="govuk-table__cell">').concat(n.ProviderName,'</td>\n                        <td class="govuk-table__cell">').concat(e.ContactAddress.Items[0],", ").concat(e.ContactAddress.StreetDescription,'</td>\n                        <td class="govuk-table__cell">').concat(e.ContactAddress.PostCode,'</td>\n                        <td class="govuk-table__cell">').concat(n.ProviderStatus,'</td>\n                        <td class="govuk-table__cell"><a class="govuk-link" href="../../providers/details">view</a></td>\n                        ');a.push(t)}})},s=e[Symbol.iterator]();!(t=(o=s.next()).done);t=!0)c()}catch(e){r=!0,i=e}finally{try{t||null==s.return||s.return()}finally{if(r)throw i}}a.forEach(function(e){var t=document.createElement("tr");t.classList.add("govuk-table__row"),t.innerHTML=e,n&&n.append(t)})});var searchInput=document.getElementById("search"),searchInputLabel=document.querySelector(".search-input-wrapper .cd-search__label");1==provider&&searchInput.addEventListener("focus",function(){document.querySelector(":focus")!==searchInput?searchInputLabel.classList.add("visible"):searchInputLabel.classList.remove("visible")});var compare={name:function(e,t){return(e=e.replace(/^the /i,""))<(t=t.replace(/^the /i,""))?-1:t<e?1:0},number:function(e,t){return e-t},duration:function(e,t){return e=e.split(":"),t=t.split(":"),(e=60*Number(e[0])+Number(e[1]))-(t=60*Number(t[0])+Number(t[1]))},date:function(e,t){return(e=new Date(e))-(t=new Date(t))}};$(".sortable").each(function(){var e=$(this),t=e.find("tbody"),r=e.find("th.main"),i=t.find("tr").toArray();r.on("click",function(){var n,e=$(this),a=e.data("sort");e.is(".ascending")||e.is(".descending")?(e.toggleClass("ascending descending"),t.append(i.reverse())):(e.addClass("ascending"),e.siblings().removeClass("ascending descending"),compare.hasOwnProperty(a)&&(n=r.index(this),i.sort(function(e,t){return e=$(e).find("td").eq(n).text(),t=$(t).find("td").eq(n).text(),compare[a](e,t)}),t.append(i)))})}),function(c){var n,a,r,i=c("#LarsSearchTerm"),s=function(){if(void 0===(r=i.val())||null==r||r.replace(/\s/g,"").length<1)c("#LarsSearchResultContainer").html("");else{var e=c("input[name='NotionalNVQLevelv2Filter']:checkbox:checked"),t=c("input[name='AwardOrgCodeFilter']:checkbox:checked"),n=c("input[name='SectorSubjectAreaTier1Filter']:checkbox:checked"),a=c("input[name='SectorSubjectAreaTier2Filter']:checkbox:checked");!function(e,t){console.log(e);var n,a,r=c.param(e);n="%5B%5D",a="",r=r.split(n).join(a),c.get("/LarsSearch?"+r,t)}({SearchTerm:i.val(),NotionalNVQLevelv2Filter:e.map(function(){return c(this).val()}).get(),AwardOrgCodeFilter:t.map(function(){return c(this).val()}).get(),SectorSubjectAreaTier1Filter:n.map(function(){return c(this).val()}).get(),SectorSubjectAreaTier2Filter:a.map(function(){return c(this).val()}).get()},o)}var r},l=function(){c("#LarsSearchResultContainer .pagination .pagination__item").on("click",function(e){e.preventDefault();var t,n,a=c(e.target).attr("href");t=a,n=o,console.log(t),c.get(t,n)})},o=function(e){var t,n,a,r,i,o;t=e,(n=c("#LarsSearchResultContainer")).html(""),n.html(t),a=c("input[name='NotionalNVQLevelv2Filter']:checkbox"),r=c("input[name='AwardOrgCodeFilter']:checkbox"),i=c("input[name='SectorSubjectAreaTier1Filter']:checkbox"),o=c("input[name='SectorSubjectAreaTier2Filter']:checkbox"),a.on("click",s),r.on("click",s),i.on("click",s),o.on("click",s),c("#ClearAllFilters").on("click",function(e){e.preventDefault();for(var t=c("input[name='NotionalNVQLevelv2Filter']:checkbox:checked, input[name='AwardOrgCodeFilter']:checkbox:checked, input[name='SectorSubjectAreaTier1Filter']:checkbox, input[name='SectorSubjectAreaTier2Filter']:checkbox"),n=t.length,a=0;a<n;a++)a===n-1?c(t[a]).trigger("click"):c(t[a]).prop("checked",!1)}),l()};i.on("keyup",(n=s,a=400,function(){var e=this,t=arguments;clearTimeout(r),r=setTimeout(function(){n.apply(e,t)},a)})),c(window).on("load",function(){c(".section-title").on("focus",function(){c(this).data("mouseDown")||c(this).click()}),c(".section-title").on("mousedown",function(){c(this).data("mouseDown",!0)}),c(".section-title").on("mouseup",function(){c(this).removeData("mouseDown")}),c(".section-title").on("click",function(){if(c(this).hasClass("open"))c(this).removeClass("open"),c(".collapsing-section").slideUp();else{c(this).addClass("open"),c(".collapsing-section").addClass("open");var e=c(this).next(".collapsing-section");c(e).slideDown()}});var e=!1;c(".btn").click(function(){(e=!e)?c("#A").animate({left:0}):c("#A").animate({left:-400})})})}(jQuery);